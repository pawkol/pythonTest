pipeline {
    agent { label 'linux' }
    options {
        buildDiscarder(logRotator(numToKeepStr: '5'))
    }
    environment {
        PATH = "/opt/sonar-scanner/bin:$PATH"
    }
    stages {
        stage('Checkout') {
            steps {
                git url: 'https://github.com/pawkol/pythonTest.git'
            }
        }
        stage('SonarQube Analysis') {
            steps {
                withSonarQubeEnv(installationName: 'python1') { 
                    sh 'sonar-scanner -Dsonar.projectKey=my-python-project -Dsonar.sources=.'
                }
            }
        }
    }
}
